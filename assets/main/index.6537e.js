System.register("chunks:///_virtual/ctrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,o,a,n,r,s,h,u,l,c,d,_,p,m,v,g;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,s=t.Size,h=t.CCFloat,u=t.SkeletalAnimation,l=t.input,c=t.Input,d=t.KeyCode,_=t.Vec3,p=t.clamp,m=t.size,v=t.v3,g=t.Component}],execute:function(){var y,f,D,b,R,M,T,A,w,z,P,E,I;n._RF.push({},"d5a8bxiRHRAl7qKvhyfbVq6","ctrl",void 0);var W=r.ccclass,O=r.property,K=function(t){return t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=4]="LEFT",t[t.RIGHT=8]="RIGHT",t}(K||{});t("Ctrl",(y=W("Ctrl"),f=O(s),D=O(h),b=O(h),R=O(h),M=O(u),y((w=i((A=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return i=t.call.apply(t,[this].concat(n))||this,o(i,"range",w,a(i)),o(i,"speed",z,a(i)),o(i,"autoMoveDelay",P,a(i)),o(i,"autoMoveSpeed",E,a(i)),o(i,"anim",I,a(i)),i._moveDir=0,i._dir=v(),i._lastInputTime=0,i._autoMoveTarget=v(),i._isAutoMoving=!1,i}e(i,t);var n=i.prototype;return n.onLoad=function(){l.on(c.EventType.KEY_DOWN,this._handleKey,this),l.on(c.EventType.KEY_UP,this._handleKey,this),this._lastInputTime=Date.now()},n._handleKey=function(t){this._lastInputTime=Date.now(),this._isAutoMoving=!1;var i=0;switch(t.keyCode){case d.ARROW_UP:case d.KEY_W:i=K.UP;break;case d.ARROW_DOWN:case d.KEY_S:i=K.DOWN;break;case d.ARROW_LEFT:case d.KEY_A:i=K.LEFT;break;case d.ARROW_RIGHT:case d.KEY_D:i=K.RIGHT}"keydown"===t.type?this._moveDir|=i:this._moveDir&=~i},n.update=function(){var t=(Date.now()-this._lastInputTime)/1e3;this._moveDir?(this._updatePosition(),this.anim.getState("mixamo.com").isPlaying||this.anim.play("mixamo.com")):t>this.autoMoveDelay?(this._isAutoMoving||this._startAutoMove(),this._autoMove(),this.anim.getState("mixamo.com").isPlaying||this.anim.play("mixamo.com")):this.anim.stop()},n._updatePosition=function(){this._dir.set(0,0,0),this._moveDir&K.UP&&this._dir.add(_.FORWARD),this._moveDir&K.DOWN&&this._dir.subtract(_.FORWARD),this._moveDir&K.LEFT&&this._dir.subtract(_.RIGHT),this._moveDir&K.RIGHT&&this._dir.add(_.RIGHT),this._dir.normalize(),this._dir.multiplyScalar(this.speed).add(this.node.position),this.node.lookAt(this._dir),this._dir.x=p(this._dir.x,-this.range.width/2,this.range.width/2),this._dir.z=p(this._dir.z,-this.range.height/2,this.range.height/2),this.node.setPosition(this._dir)},n._startAutoMove=function(){this._isAutoMoving=!0;var t=(Math.random()-.5)*this.range.width,i=(Math.random()-.5)*this.range.height;this._autoMoveTarget.set(t,this.node.position.y,i)},n._autoMove=function(){if(this._isAutoMoving){var t=this.node.position,i=this._autoMoveTarget.clone().subtract(t);if(i.length()<.1)this._startAutoMove();else{i.normalize(),i.multiplyScalar(this.autoMoveSpeed);var e=t.clone().add(i);e.x=p(e.x,-this.range.width/2,this.range.width/2),e.z=p(e.z,-this.range.height/2,this.range.height/2),this.node.lookAt(e),this.node.setPosition(e)}}},i}(g)).prototype,"range",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m(8,8)}}),z=i(A.prototype,"speed",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),P=i(A.prototype,"autoMoveDelay",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),E=i(A.prototype,"autoMoveSpeed",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.02}}),I=i(A.prototype,"anim",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=A))||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./ctrl.ts","./main.ts"],(function(){return{setters:[null,null],execute:function(){}}}));

System.register("chunks:///_virtual/main.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,i,o,n,a,u,l,c,s,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,u=t.RenderTexture,l=t.Camera,c=t.Material,s=t.gfx,p=t.Component}],execute:function(){var f,h,b,d,m,g,y,T,v;n._RF.push({},"6638aXjxh9JtozrpjFJZpor","main",void 0);var P=a.ccclass,R=a.property;t("Main",(f=P("Main"),h=R({type:[u]}),b=R(l),d=R(c),f((y=e((g=function(t){function e(){var e;return e=t.call(this)||this,i(e,"doubleRT",y,o(e)),i(e,"footPrintCam",T,o(e)),i(e,"footPrintMat",v,o(e)),s.deviceManager.gfxDevice._swapchainFormat=s.Format.RGBA16F,e.doubleRT.forEach((function(t){return t.reset({width:t.width,height:t.height})})),e}r(e,t);var n=e.prototype;return n.update=function(){this._swap()},n._swap=function(){var t=this.footPrintCam.targetTexture===this.doubleRT[0]?[1,0]:[0,1],e=t[0],r=t[1];this.footPrintCam.targetTexture=this.doubleRT[e],this.footPrintMat.setProperty("mainTexture",this.doubleRT[r])},e}(p)).prototype,"doubleRT",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=e(g.prototype,"footPrintCam",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(g.prototype,"footPrintMat",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=g))||m));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});